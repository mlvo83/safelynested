<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Charities - Donor Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <th:block th:replace="~{donor/fragments/sidebar :: sidebar-styles}"></th:block>
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <th:block th:replace="~{donor/fragments/sidebar :: sidebar('charities')}"></th:block>

        <!-- Main Content -->
        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 main-content">
            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                <div>
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb mb-1">
                            <li class="breadcrumb-item"><a th:href="@{/donor/dashboard}">Dashboard</a></li>
                            <li class="breadcrumb-item active">Charities</li>
                        </ol>
                    </nav>
                    <h1 class="h2"><i class="fas fa-hands-helping me-2 text-success"></i>Charities I Support</h1>
                    <p class="text-muted mb-0">Organizations you're partnering with to help families</p>
                </div>
            </div>

            <!-- No Charities Message -->
            <div th:if="${charities == null or charities.isEmpty()}" class="text-center py-5">
                <i class="fas fa-building fa-4x text-muted mb-3"></i>
                <h4 class="text-muted">No Charities Assigned</h4>
                <p class="text-muted">You haven't been assigned to any charities yet. Please contact your administrator.</p>
            </div>

            <!-- Charities Grid -->
            <div th:unless="${charities == null or charities.isEmpty()}" class="row g-4">
                <div th:each="charity : ${charities}" class="col-md-6 col-lg-4">
                    <div class="card shadow-sm h-100">
                        <div class="card-header bg-success text-white">
                            <h5 class="mb-0">
                                <i class="fas fa-building me-2"></i>
                                <span th:text="${charity.charityName}">Charity Name</span>
                            </h5>
                        </div>
                        <div class="card-body">
                            <!-- Contact Info -->
                            <div th:if="${charity.contactEmail}" class="mb-2">
                                <i class="fas fa-envelope me-2 text-muted"></i>
                                <span th:text="${charity.contactEmail}">email@charity.org</span>
                            </div>
                            <div th:if="${charity.contactPhone}" class="mb-2">
                                <i class="fas fa-phone me-2 text-muted"></i>
                                <span th:text="${charity.contactPhone}">(555) 123-4567</span>
                            </div>
                            <div th:if="${charity.city != null and charity.state != null}" class="mb-3">
                                <i class="fas fa-map-marker-alt me-2 text-muted"></i>
                                <span th:text="${charity.city + ', ' + charity.state}">City, State</span>
                            </div>

                            <!-- Organization Info -->
                            <div th:if="${charity.organizationType}" class="mb-3">
                                <small class="text-muted">
                                    <i class="fas fa-tag me-1"></i>
                                    <span th:text="${charity.organizationType}">Non-profit</span>
                                </small>
                            </div>

                            <!-- Active Status -->
                            <div class="text-center">
                                <span th:if="${charity.isActive}" class="badge bg-success">
                                    <i class="fas fa-check-circle me-1"></i>Active Partner
                                </span>
                                <span th:unless="${charity.isActive}" class="badge bg-secondary">
                                    <i class="fas fa-pause-circle me-1"></i>Inactive
                                </span>
                            </div>
                        </div>
                        <div class="card-footer bg-white">
                            <a th:href="@{/donor/charities/{id}(id=${charity.id})}" class="btn btn-outline-success w-100">
                                <i class="fas fa-eye me-1"></i> View My Donations
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Info Card -->
            <div class="card shadow-sm mt-4">
                <div class="card-body">
                    <h6><i class="fas fa-info-circle me-2 text-info"></i>About Your Charity Partnerships</h6>
                    <p class="text-muted small mb-0">
                        You've been assigned to work with these charities to help provide housing assistance.
                        Each charity has their own nightly rate based on local housing costs.
                        Click "View My Donations" to see your donation history and impact with each charity.
                    </p>
                </div>
            </div>
        </main>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
